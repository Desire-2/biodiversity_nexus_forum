{% extends "base.html" %}
{% block title %}Register{% endblock %}
{% block content %}
<div class="container">
	<h1 class="text-center"><i class="fas fa-user-plus"></i> Register</h1>
	
	<!-- Flash messages section -->
	{% with messages = get_flashed_messages(with_categories=true) %}
		{% if messages %}
			<div class="alert-container">
				{% for category, message in messages %}
					<div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
						{{ message }}
						<button type="button" class="close" data-dismiss="alert" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
				{% endfor %}
			</div>
		{% endif %}
	{% endwith %}
	
	<form method="POST" action="">
		{{ form.hidden_tag() }}
		<div class="form-group">
			{{ form.username.label(class="form-label") }}
			<div class="input-group">
				<div class="input-group-prepend">
					<span class="input-group-text"><i class="fas fa-user"></i></span>
				</div>
				{{ form.username(class="form-control form-control-lg") }}
			</div>
		</div>
		<div class="form-group">
			{{ form.email.label(class="form-label") }}
			<div class="input-group">
				<div class="input-group-prepend">
					<span class="input-group-text"><i class="fas fa-envelope"></i></span>
				</div>
				{{ form.email(class="form-control form-control-lg") }}
			</div>
		</div>
		<div class="form-group">
			{{ form.password.label(class="form-label") }}
			<div class="input-group">
				<div class="input-group-prepend">
					<span class="input-group-text"><i class="fas fa-lock"></i></span>
				</div>
				{{ form.password(class="form-control form-control-lg", id="password") }}
				<div class="input-group-append">
					<span class="input-group-text" id="togglePassword"><i class="fas fa-eye"></i></span>
				</div>
			</div>
		</div>
		<div class="form-group">
			{{ form.confirm_password.label(class="form-label") }}
			<div class="input-group">
				<div class="input-group-prepend">
					<span class="input-group-text"><i class="fas fa-lock"></i></span>
				</div>
				{{ form.confirm_password(class="form-control form-control-lg", id="confirm_password") }}
				<div class="input-group-append">
					<span class="input-group-text" id="toggleConfirmPassword"><i class="fas fa-eye"></i></span>
				</div>
			</div>
		</div>
		<button type="submit" class="btn btn-success btn-block btn-lg"><i class="fas fa-user-plus"></i> Register</button>
	</form>
</div>

<script>
	document.getElementById('togglePassword').addEventListener('click', function (e) {
		const password = document.getElementById('password');
		const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
		password.setAttribute('type', type);
		this.querySelector('i').classList.toggle('fa-eye');
		this.querySelector('i').classList.toggle('fa-eye-slash');
	});

	document.getElementById('toggleConfirmPassword').addEventListener('click', function (e) {
		const confirmPassword = document.getElementById('confirm_password');
		const type = confirmPassword.getAttribute('type') === 'password' ? 'text' : 'password';
		confirmPassword.setAttribute('type', type);
		this.querySelector('i').classList.toggle('fa-eye');
		this.querySelector('i').classList.toggle('fa-eye-slash');
	});
</script>
{% endblock %}